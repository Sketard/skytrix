<button mat-icon-button class="cardSearchPage-searchToggle"
  aria-label="Rechercher une carte"
  [attr.aria-expanded]="searchPanelOpened() && isMobilePortrait()"
  (click)="toggleSearchPanel()">
  <mat-icon>search</mat-icon>
</button>

<div class="cardSearchPage-desktop">
  <app-card-searcher
    [deckBuildMode]="false"
    [searchService]="cardSearchService"
    (cardClicked)="onCardClicked($event)"
    (filtersExpanded)="onFiltersExpanded($event)">
  </app-card-searcher>
</div>

<app-bottom-sheet
  [opened]="searchPanelOpened() && isMobilePortrait()"
  [ariaLabel]="'Panneau de recherche de cartes'"
  [requestedSnap]="filtersRequestedSnap()"
  (closed)="searchPanelOpened.set(false)">
  <app-card-searcher
    [deckBuildMode]="false"
    [searchService]="cardSearchService"
    (cardClicked)="onCardClicked($event)"
    (filtersExpanded)="onFiltersExpanded($event)">
  </app-card-searcher>
</app-bottom-sheet>

<app-card-inspector
  [card]="selectedCardForInspector()"
  mode="click"
  (dismissed)="dismissInspector()">
  @if (selectedCardDetail(); as cd) {
    <button mat-icon-button class="favorite-toggle"
            (click)="toggleFavorite(); $event.stopPropagation()"
            [attr.aria-label]="cd.favorite ? 'Supprimer des favoris' : 'Ajouter aux favoris'"
            [title]="cd.favorite ? 'Supprimer des favoris' : 'Ajouter aux favoris'">
      <mat-icon [fontIcon]="cd.favorite ? 'star' : 'star_border'"></mat-icon>
    </button>
  }
</app-card-inspector>
