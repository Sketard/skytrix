:host {
  position: fixed;
  right: 12px;
  bottom: 12px;
  z-index: 40;
  transition: right 200ms ease;

  &.pile-open {
    right: 110px; // 90px pile outer width + 8px pile right + 12px gap
  }
}

// ── Desktop: always-visible bar ──
.control-bar {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 8px 6px;
  background: var(--sim-surface-translucent);
  backdrop-filter: blur(8px);
  border: 1px solid var(--sim-zone-border);
  border-radius: 24px;
}

.separator {
  width: 24px;
  height: 1px;
  background: var(--sim-zone-border);
  margin: 2px 0;
}

button {
  color: var(--text-primary);
  transition: background 100ms ease;

  &:hover:not(:disabled) {
    background: var(--surface-elevated);
  }

  &:disabled {
    color: var(--text-secondary);
    opacity: 0.4;
  }
}

.debug-info {
  color: var(--text-secondary);
  font-size: 11px;
  font-family: monospace;
  white-space: nowrap;
}

// ── Mobile: collapsible FAB ──
.fab-trigger {
  display: none;
}

.fab-actions {
  display: none;
}

// Both media queries needed to match JS isMobile() breakpoint
@media (max-width: 767px), (max-width: 1023px) and (max-height: 500px) {
  :host {
    bottom: 12px;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
  }

  .fab-trigger {
    display: flex;
    background: var(--sim-surface-translucent);
    backdrop-filter: blur(8px);
    border: 1px solid var(--sim-zone-border);
    color: var(--text-primary);
    transition: transform 200ms ease;

    &.open {
      transform: rotate(90deg);
    }
  }

  .fab-actions {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    pointer-events: none;

    .fab-action {
      opacity: 0;
      transform: scale(0.4) translateY(10px);
      transition: opacity 200ms ease, transform 200ms ease;
      pointer-events: none;
      background: var(--sim-surface-translucent);
      backdrop-filter: blur(8px);
      border: 1px solid var(--sim-zone-border);
      border-radius: 50%;
    }

    &.open {
      pointer-events: auto;

      .fab-action {
        opacity: 1;
        transform: scale(1) translateY(0);
        pointer-events: auto;
      }

      // Stagger: closest to FAB appears first
      .fab-action:nth-child(4) { transition-delay: 0ms; }
      .fab-action:nth-child(3) { transition-delay: 50ms; }
      .fab-action:nth-child(2) { transition-delay: 100ms; }
      .fab-action:nth-child(1) { transition-delay: 150ms; }
    }
  }
}

