<div class="grid">
  @if (!deckZone()) {
    <div class="grid-list background">
      @for (slot of [].constructor(slotNumber()); track i; let i = $index) {
        {{ slot }}
        <div class="grid-list-slot grid" [ngClass]="deckZone()"></div>
      }
    </div>
  }
  <div class="grid-list"
    [class.element]="!deckZone()"
    [class.empty]="isEmpty()"
    [ngClass]="deckZone() + staticDeckZone.LOCK"
    cdkDropList
    cdkDropListOrientation="mixed"
    [id]="deckZone() || staticDeckZone.OTHER"
    (cdkDropListDropped)="drop($event)">
    @if (isEmpty()) {
      <span class="grid-list-hint">Glissez ou double-cliquez pour ajouter</span>
    }
    @for (cardDetail of cardDetails(); track cardDetail.id + i; let i = $index) {
      <div
        class="grid-list-slot card"
        [ngClass]="deckZone()"
        [class.just-added]="cardDetail.justAdded"
        (animationend)="cardDetail.justAdded = false"
        cdkDrag
        appLongPressDrag
        [longPressDragDisabled]="!cardDetail.card.card.id"
        [cdkDragDisabled]="!cardDetail.card.card.id"
        [cdkDragData]="cardDetail"
        (contextmenu)="onRightClick($event, deckZone(), i)">
        @if (cardDetail.card.card.id) {
          <app-card
            [card]="toSharedCardData(cardDetail.card)"
            (click)="onCardClick(cardDetail.card)">
          </app-card>
          @if (cardDetail.card.card.banInfo < 3) {
            <div class="ban-badge">
              <div>{{ cardDetail.card.card.banInfo }}</div>
            </div>
          }
        }
      </div>
    }
  </div>
</div>
