@use '../../styles/variable' as *;
@use '../../styles/responsive' as r;

.grid {
  display: flex;
  flex-wrap: wrap;
  position: relative;
  align-content: flex-start;
  justify-content: flex-start;

  &-list {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    width: 100%;

    @include r.respond-above(r.$bp-desktop-sm) {
      grid-template-columns: repeat(10, 1fr);
    }

    // Cover image mode: keep flexbox for absolute overlay
    &.element {
      display: flex;
      flex-wrap: wrap;
      position: absolute;
      top: 0;
      bottom: 0;
      left: 0;
      right: 0;

      .grid-list-slot.card {
        width: var(--slot-width, #{$DECK_CARD_WIDTH});
        height: var(--slot-height, #{$DECK_CARD_HEIGHT});
      }
    }

    // Empty deck zone placeholder (visible drop target)
    &.empty {
      min-height: 60px;
      border: 1px dashed rgba(255, 255, 255, 0.2);
      border-radius: 4px;
    }

    // Background slot grid (cover images, no deckZone) must stay flexbox
    &.background {
      display: flex;
      flex-wrap: wrap;
      align-content: flex-start;
      justify-content: flex-start;
    }

    &-slot {
      box-sizing: border-box;

      &.card {
        position: relative;
        padding: 3px;

        app-card {
          --card-border-radius: 2px;
          --card-shadow: none;
        }

        // CDK drag placeholder (stays in grid â€” maintains cell dimensions)
        &.cdk-drag-placeholder {
          opacity: 0.3;
        }

        // CDK drag animating (return-to-position after drop)
        &.cdk-drag-animating {
          transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);
        }
      }

      // Background slot grid (cover images only): keep fixed sizes
      &.grid {
        position: relative;
        border: $white solid 1px;
        background-color: rgba(255, 255, 255, 0.3);
        height: $DECK_CARD_HEIGHT;
        width: $DECK_CARD_WIDTH;
      }
    }
  }
}
